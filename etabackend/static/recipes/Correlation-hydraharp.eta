{"vi_templatejg59migx":"{\"nodes\":[{\"x\":101,\"y\":101,\"fixed\":true,\"text\":\"a\",\"px\":101,\"py\":101,\"initial\":true}],\"edges\":[{\"source\":0,\"target\":0,\"text\":\"1\"}],\"usercode\":\"a:\\n    emit(4,`bw_delay`)# here, ch1 is duplicated to ch3 with a delay of 0ps\"}","vi_templatejfc9koma":"{\"nodes\":[{\"x\":82,\"y\":88,\"fixed\":true,\"text\":\"a\",\"px\":82,\"py\":88,\"initial\":true}],\"edges\":[{\"source\":0,\"target\":0,\"text\":\"0\"}],\"usercode\":\"a:\\n    emit(3,`fw_delay`)# here, ch0 is duplicated to ch2 with a delay of 0ps\"}","vi_templatejg52ksbp":"{\"nodes\":[{\"x\":346,\"y\":111,\"fixed\":true,\"text\":\"start\",\"px\":346,\"py\":111},{\"x\":95,\"y\":102,\"fixed\":true,\"text\":\"stop\",\"px\":95,\"py\":102,\"initial\":true}],\"edges\":[{\"source\":0,\"target\":1,\"text\":\"4\"},{\"source\":1,\"target\":0,\"text\":\"3\"},{\"source\":0,\"target\":0,\"text\":\"3\"},{\"source\":1,\"target\":1,\"text\":\"4\"}],\"usercode\":\"HISTOGRAM(h4,(`bins`,`binsize`,\\\"time-1\\\"))\\nHISTOGRAM(h4_zero,(1,1))\\nCLOCK(c4,100,1)\\nstart:\\n    c4.start()\\nstop:\\n    c4.stop()\\n    h4.record_all(c4)\\n    h4_zero.record_all(c4)\"}","vi_templatejfb2qshf":"{\"nodes\":[{\"x\":346,\"y\":111,\"fixed\":true,\"text\":\"start\",\"px\":346,\"py\":111},{\"x\":102,\"y\":102,\"fixed\":true,\"text\":\"stop\",\"px\":102,\"py\":102,\"initial\":true}],\"edges\":[{\"source\":0,\"target\":1,\"text\":\"3\"},{\"source\":1,\"target\":0,\"text\":\"4\"},{\"source\":0,\"target\":0,\"text\":\"4\"},{\"source\":1,\"target\":1,\"text\":\"3\"}],\"usercode\":\"HISTOGRAM(h3,(`bins`,`binsize`))\\nCLOCK(c3,100,1)\\nstart:\\n    c3.start()\\nstop:\\n    c3.stop()\\n    h3.record_all(c3)\"}","eta_index_table":"[{\"id\":\"var_templatejgmgopco\",\"name\":\"file\",\"group\":\"T2,T3\",\"info\":\"\",\"config\":\"C:/YourFolder/YourFile.timeres\"},{\"id\":\"var_templatejkim8l39\",\"name\":\"binsize\",\"group\":\"T2,T3\",\"info\":\"\",\"config\":\"16\"},{\"id\":\"var_templatejkim8rzm\",\"name\":\"expname\",\"group\":\"T2,T3\",\"info\":\"\",\"config\":\"Correlation\"},{\"id\":\"var_templatejkim8w21\",\"name\":\"bins\",\"group\":\"T2,T3\",\"info\":\"\",\"config\":\"10000\"},{\"id\":\"var_templatek71lu4ak\",\"name\":\"records_per_cut\",\"group\":\"T2,T3\",\"info\":\"\",\"config\":\"2e5\"},{\"id\":\"var_templatek7uj6ou8\",\"name\":\"HH400_mode\",\"group\":\"T2,T3\",\"info\":\"\",\"config\":\"T3\"},{\"id\":\"var_templatek8g3kag4\",\"name\":\"delay\",\"group\":\"T2,T3\",\"info\":\"\",\"config\":\"0\"},{\"id\":\"var_templatek8g498fo\",\"name\":\"bw_delay\",\"group\":\"T2,T3\",\"info\":\"\",\"config\":\"0\"},{\"id\":\"var_templatek8g49hcs\",\"name\":\"fw_delay\",\"group\":\"T2,T3\",\"info\":\"\",\"config\":\"0\"},{\"id\":\"dpp_templatek7r3sgz1\",\"name\":\"display\",\"group\":\"T2,T3\",\"info\":\"\",\"config\":\"\"},{\"id\":\"dpp_templatek0e4ffk5\",\"name\":\"save txt\",\"group\":\"T2,T3\",\"info\":\"\",\"config\":\"\"},{\"id\":\"vi_templatek6z7rk2w\",\"name\":\"HH400\",\"group\":\"T2,T3\",\"info\":\"游닆[0, 1, 2] \",\"config\":\"\"},{\"id\":\"vi_templatek0e44hsk\",\"name\":\"DL1-3 (T2)\",\"group\":\"T2\",\"info\":\"游닌[1] 游닋[3] \",\"config\":\"\"},{\"id\":\"vi_templatek0e44v54\",\"name\":\"DL2-4 (T2)\",\"group\":\"T2\",\"info\":\"游닌[2] 游닋[4] \",\"config\":\"\"},{\"id\":\"vi_templatejfc9koma\",\"name\":\"DL0-3 (T3)\",\"group\":\"T3\",\"info\":\"游닌[0] 游닋[3] \",\"config\":\"\"},{\"id\":\"vi_templatejg59migx\",\"name\":\"DL1-4 (T3)\",\"group\":\"T3\",\"info\":\"游닌[1] 游닋[4] \",\"config\":\"\"},{\"id\":\"vi_templatejg52ksbp\",\"name\":\"backward correlation\",\"group\":\"T2,T3\",\"info\":\"游닌[4, 3] \",\"config\":\"\"},{\"id\":\"vi_templatejfb2qshf\",\"name\":\"forward correlation\",\"group\":\"T2,T3\",\"info\":\"游닌[3, 4] \",\"config\":\"\"}]","var_templatejgmgopco":null,"var_templatejkim8l39":null,"var_templatejkim8rzm":null,"var_templatejkim8w21":null,"vi_templatek0e44hsk":"{\"nodes\":[{\"x\":82,\"y\":88,\"fixed\":true,\"text\":\"a\",\"px\":82,\"py\":88,\"initial\":true}],\"edges\":[{\"source\":0,\"target\":0,\"text\":\"1\"}],\"usercode\":\"a:\\n    emit(3,`fw_delay`)# here, ch0 is duplicated to ch2 with a delay of 0ps\"}","vi_templatek0e44v54":"{\"nodes\":[{\"x\":101,\"y\":101,\"fixed\":true,\"text\":\"a\",\"px\":101,\"py\":101,\"initial\":true}],\"edges\":[{\"source\":0,\"target\":0,\"text\":\"2\"}],\"usercode\":\"a:\\n    emit(4,`bw_delay`)# here, ch1 is duplicated to ch3 with a delay of 0ps\"}","dpp_templatek0e4ffk5":"#------IMPORTS-----\r\nfrom pathlib import Path\r\nimport numpy as np\r\n\r\ndef get_files(extensions):\r\n    global path\r\n    all_files = []\r\n    for ext in extensions:\r\n        all_files.extend(path.glob(ext))\r\n    return all_files\r\n    \r\ndef info(filename, binsize=binsize, bins=bins):\r\n    return (f'Created with ETA - https://timetag.github.io\\n'\r\n            f'filename: {filename.name}\\n'\r\n            f'binsize: {binsize}\\n'\r\n            f'bins: {bins}\\n'\r\n            f'mode: {lambda HH400_mode: HH400_mode if HH400_mode in globals() else \"qutag\"}\\n'\r\n            )\r\n\r\n#------ADJUST DELAY-----\r\ndelay = int(float(delay))\r\neta.recipe.set_parameter(\"bw_delay\",str(max(0,-1*delay)))\r\neta.recipe.set_parameter(\"fw_delay\",str(max(0,delay)))\r\neta.load_recipe()\r\n\r\n#------ETA PROCESSING-----\r\nbinsize=int(float(binsize))\r\npath = Path(file)\r\ndatafolder='analyzed data'\r\n\r\nselector = (f for f in get_files(('*.ptu','*.timeres'))) if path.is_dir() else [path]\r\n\r\nfor f in selector:\r\n        cutfile = eta.clips(f)\r\n        result=eta.run({\"timetagger1\":cutfile}, group=HH400_mode)\r\n        hist1=result[\"h3\"]\r\n        hist2=result[\"h4\"] \r\n        hist0=result[\"h4_zero\"]\r\n        hist1[0]+= hist0[0]\r\n        fullhist=np.concatenate((hist2[::-1],hist1))\r\n        f.parent.joinpath(datafolder).mkdir(parents=True, exist_ok=True)\r\n        np.savetxt(f.parent.joinpath(datafolder, f.stem + '_correlation' +  '.txt'), np.transpose([np.arange(-hist2.size,hist1.size)*binsize,fullhist]), delimiter='\\t', header=info(f))\r\n        eta.send(str(f.name) + ' has been successfully processed')\r\neta.send('FINISHED')\r\n\r\n","vi_templatek6z7rk2w":"{\"nodes\":[{\"x\":129,\"y\":62,\"fixed\":true,\"initial\":true}],\"edges\":[],\"usercode\":\"\\n########## click Help on the menu to get started! ##########\\nRFILE(timetagger1,[0,1,2])\"}","var_templatek71lu4ak":null,"dpp_templatek7r3sgz1":"import pathlib\nimport logging\n\nimport numpy as np\n\nfrom bokeh.application import Application\nfrom bokeh.application.handlers.function import FunctionHandler\nimport etabackend.tk as etatk\n\nlogger = logging.getLogger('etabackend.frontend')\n\nlogger.info(\"ETA realtime is started.\")\n\nrecords_per_cut = int(float(records_per_cut)\n                      ) if records_per_cut != \"\" else None\n\nSIMULATE_GROWTH = False\nDATAFOLDER = 'analyzed data'\nTITLE = expname\n\nbinsize = int(float(binsize))\nbins = int(float(bins))\nbin_factor = int(float(binsize))\nfile = pathlib.Path(file)\n\n#------ADJUST DELAY-----\ndelay = int(float(delay))\neta.recipe.set_parameter(\"bw_delay\",str(max(0,-1*delay)))\neta.recipe.set_parameter(\"fw_delay\",str(max(0,delay)))\neta.load_recipe()\n\n#------Evaluate Data-----\nclass HistogramResult(etatk.data.ETAResult):\n    def calculate_result(self, result):\n        hist1 = result['h3']\n        hist2 = result['h4']\n        hist0 = result[\"h4_zero\"]\n        hist1[0] += hist0[0]\n        xdata = np.arange(-hist2.size, hist1.size) * bin_factor\n        ydata = np.concatenate((hist2[::-1], hist1))\n        return xdata, ydata\n\nresult = HistogramResult(file, group=HH400_mode, records_per_cut=records_per_cut, \n                         kernel=eta, timeout=0.2, \n                         simulate_growth=SIMULATE_GROWTH)\nbp = etatk.plot.ETABokehPlot(result, result_folder=DATAFOLDER, title=TITLE)\n\nnot_displaying = eta.display(Application(FunctionHandler(bp.bokeh_plot_document)), 'bokeh')\nbp.run(not_displaying)\n\nlogger.info(\"ETA realtime is stopped.\")","var_templatek7uj6ou8":null,"var_templatek8g3kag4":null,"var_templatek8g498fo":null,"var_templatek8g49hcs":null}